# Claude Code 개발 요청서 - Phase 2 Sprint 11-12

## Quick Wins + UX 개선

**기간**: Week 1-4 (Month 4)
**목표**: 빠르게 구현 가능한 UX 개선 기능 배포, 사용자 만족도 향상

---

## 작업 1: 피드백 템플릿 시스템

### 요청 내용

```
자주 사용하는 피드백을 템플릿으로 저장하고 재사용하는 기능을 구현해주세요.

DB 변경:
- profiles 테이블에 feedback_templates JSONB 컬럼 추가

스키마:
feedback_templates: [{
  id: string (UUID),
  title: string,
  content: string,
  icon?: string,
  order: number
}]

API 엔드포인트:

# 템플릿 목록 조회
GET /api/feedback-templates
- response: { templates: FeedbackTemplate[] }

# 템플릿 저장 (전체 교체)
PUT /api/feedback-templates
- body: { templates: FeedbackTemplate[] }
- response: { success: boolean }

# 단일 템플릿 추가
POST /api/feedback-templates
- body: { title, content, icon? }
- response: { template: FeedbackTemplate }

# 템플릿 삭제
DELETE /api/feedback-templates/:id
- response: { success: boolean }

UI 컴포넌트:

1. 피드백 작성 시 템플릿 선택 드롭다운
   ┌─────────────────────────────────────┐
   │ 템플릿 선택                    ▼    │
   ├─────────────────────────────────────┤
   │ 📝 자막 위치 조정                   │
   │ 🎵 BGM 볼륨 조절                    │
   │ 🎨 색보정 수정                      │
   │ ────────────────────────────────── │
   │ ⚙️ 템플릿 관리                      │
   └─────────────────────────────────────┘

2. 템플릿 관리 모달
   ┌─────────────────────────────────────┐
   │ 피드백 템플릿 관리           [X]    │
   ├─────────────────────────────────────┤
   │ ⋮≡ 📝 자막 위치 조정    [수정][삭제]│
   │ ⋮≡ 🎵 BGM 볼륨 조절     [수정][삭제]│
   │ ⋮≡ 🎨 색보정 수정       [수정][삭제]│
   │                                     │
   │              [+ 새 템플릿 추가]     │
   └─────────────────────────────────────┘

요구사항:
1. 드래그 앤 드롭 순서 변경
2. 템플릿 클릭 시 피드백 입력창에 자동 삽입
3. 최대 20개 템플릿 제한
4. 아이콘은 이모지 선택 또는 기본 아이콘
```

---

## 작업 2: 빠른 승인 버튼

### 요청 내용

```
영상 버전 페이지에 원터치 승인 기능을 구현해주세요.

API 엔드포인트:

# 버전 승인
PATCH /api/videos/:videoId/versions/:versionId/approve
- body: { comment?: string }
- response: {
    success: boolean,
    version: VideoVersion
  }

UI 변경:

1. 영상 버전 페이지 헤더에 버튼 추가
   ┌─────────────────────────────────────┐
   │ v3 - 최종본            [✓ 이 버전 승인] │
   └─────────────────────────────────────┘

2. 승인 확인 다이얼로그
   ┌─────────────────────────────────────┐
   │ 버전 승인 확인                [X]   │
   ├─────────────────────────────────────┤
   │                                     │
   │ "v3 - 최종본"을 승인하시겠습니까?   │
   │                                     │
   │ 승인 코멘트 (선택)                  │
   │ ┌─────────────────────────────────┐ │
   │ │ 수고하셨습니다!                 │ │
   │ └─────────────────────────────────┘ │
   │                                     │
   │                   [취소]  [승인하기] │
   └─────────────────────────────────────┘

3. 승인 완료 후 상태 뱃지 업데이트
   - 버전 상태: 'approved'
   - 뱃지: 초록색 "승인됨" 표시

요구사항:
1. 클라이언트 역할만 승인 가능
2. 이미 승인된 버전은 버튼 비활성화
3. 승인 시 알림 발송 (작업자에게)
4. 모바일에서도 접근 용이한 위치
```

---

## 작업 3: 키보드 단축키 시스템

### 요청 내용

```
전역 키보드 단축키 시스템을 구현해주세요.

단축키 목록:

| 단축키 | 기능 | 컨텍스트 |
|--------|------|----------|
| Cmd/Ctrl+K | 글로벌 검색 | 전역 |
| Cmd/Ctrl+N | 새 프로젝트 | 전역 |
| Cmd/Ctrl+/ | 단축키 목록 | 전역 |
| Esc | 모달/패널 닫기 | 전역 |
| J | 다음 피드백 | 피드백 목록 |
| K | 이전 피드백 | 피드백 목록 |
| R | 피드백 답글 | 피드백 선택 시 |
| E | 피드백 수정 | 내 피드백 선택 시 |
| Space | 영상 재생/정지 | 영상 플레이어 |
| ← / → | 5초 이동 | 영상 플레이어 |

구현:

1. useGlobalHotkeys 훅 생성
   // hooks/useGlobalHotkeys.ts

2. 단축키 목록 모달
   ┌─────────────────────────────────────┐
   │ 키보드 단축키                 [X]   │
   ├─────────────────────────────────────┤
   │ 전역                                │
   │ ├ ⌘K  글로벌 검색                   │
   │ ├ ⌘N  새 프로젝트                   │
   │ └ ⌘/  단축키 목록                   │
   │                                     │
   │ 피드백                              │
   │ ├ J   다음 피드백                   │
   │ ├ K   이전 피드백                   │
   │ ├ R   답글                          │
   │ └ E   수정                          │
   │                                     │
   │ 영상 플레이어                        │
   │ ├ Space  재생/정지                  │
   │ └ ←/→   5초 이동                    │
   └─────────────────────────────────────┘

3. 글로벌 검색 모달 (Cmd+K)
   ┌─────────────────────────────────────┐
   │ 🔍 프로젝트, 문서, 영상 검색...     │
   ├─────────────────────────────────────┤
   │ 최근 항목                           │
   │ ├ 📁 브랜드 홍보영상                │
   │ └ 📁 제품 소개 영상                 │
   │                                     │
   │ 빠른 액션                           │
   │ ├ ➕ 새 프로젝트                    │
   │ └ ⚙️ 설정                           │
   └─────────────────────────────────────┘

요구사항:
1. react-hotkeys-hook 라이브러리 사용
2. 모달 열려있을 때 전역 단축키 비활성화
3. input/textarea 포커스 시 비활성화
4. Mac/Windows 단축키 표시 자동 전환
```

---

## 작업 4: QR 코드 프로젝트 공유

### 요청 내용

```
프로젝트 QR 코드 생성 및 공유 기능을 구현해주세요.

기능:
1. 프로젝트 상세 페이지에서 QR 코드 생성
2. QR 코드 다운로드 (PNG)
3. 공유 URL 복사

UI:

1. 프로젝트 헤더에 공유 버튼 추가
   [공유 ▼]
   ├ 🔗 링크 복사
   ├ 📱 QR 코드
   └ ✉️ 이메일 초대

2. QR 코드 모달
   ┌─────────────────────────────────────┐
   │ QR 코드 공유                  [X]   │
   ├─────────────────────────────────────┤
   │                                     │
   │         ┌─────────────┐             │
   │         │ █▀▀▀▀▀▀█   │             │
   │         │ █ QR   █   │             │
   │         │ █ CODE █   │             │
   │         │ █▄▄▄▄▄▄█   │             │
   │         └─────────────┘             │
   │                                     │
   │      브랜드 홍보영상 프로젝트       │
   │                                     │
   │    [PNG 다운로드]  [링크 복사]      │
   └─────────────────────────────────────┘

구현:

import QRCode from 'qrcode';

// 컴포넌트
function ProjectQRCode({ projectId, projectName }) {
  const [qrDataUrl, setQrDataUrl] = useState('');

  useEffect(() => {
    const url = `${window.location.origin}/projects/${projectId}`;
    QRCode.toDataURL(url, { width: 256 }).then(setQrDataUrl);
  }, [projectId]);

  // ...
}

요구사항:
1. qrcode 라이브러리 사용
2. QR 코드에 프로젝트 로고 삽입 (선택적)
3. 다크모드 대응
4. 다운로드 파일명: "NAVIG-{프로젝트명}.png"
```

---

## 작업 5: 피드백 통계 대시보드

### 요청 내용

```
프로젝트별 피드백 통계를 시각화하는 대시보드를 구현해주세요.

API 엔드포인트:

# 프로젝트 피드백 통계
GET /api/projects/:id/feedback-stats
- response: {
    total_feedbacks: number,
    resolved_feedbacks: number,
    pending_feedbacks: number,
    urgent_feedbacks: number,
    resolution_rate: number, // 0-100
    avg_response_time_hours: number,
    avg_resolution_time_hours: number,
    feedback_by_status: {
      pending: number,
      in_progress: number,
      resolved: number,
      rejected: number
    },
    feedback_trend: [{ // 최근 7일
      date: string,
      created: number,
      resolved: number
    }],
    top_feedback_creators: [{
      user_id: string,
      name: string,
      count: number
    }]
  }

UI 레이아웃:

┌────────────────────────────────────────────────────┐
│ 피드백 통계                              기간: 7일 │
├────────────────────────────────────────────────────┤
│                                                    │
│ ┌──────────┬──────────┬──────────┬──────────┐     │
│ │  전체    │  해결    │  대기    │  긴급    │     │
│ │   25    │   20    │    3     │    2     │     │
│ └──────────┴──────────┴──────────┴──────────┘     │
│                                                    │
│ 해결률                        평균 응답 시간       │
│ ┌─────────────────────┐      ┌─────────────────┐  │
│ │        80%         │      │      2.5시간     │  │
│ │  ████████░░        │      │                 │  │
│ └─────────────────────┘      └─────────────────┘  │
│                                                    │
│ 피드백 추이 (최근 7일)                             │
│ ┌─────────────────────────────────────────────┐   │
│ │     ──○── 생성                              │   │
│ │     ──●── 해결                              │   │
│ │  4 │    ●                                   │   │
│ │  3 │   ○ ●  ○                               │   │
│ │  2 │ ● ● ○  ● ○                             │   │
│ │  1 │                                        │   │
│ │    └───────────────────────────────────     │   │
│ │      월  화  수  목  금  토  일              │   │
│ └─────────────────────────────────────────────┘   │
│                                                    │
│ 상태별 분포           │ 피드백 작성자 TOP 3       │
│ ┌───────────────────┐ │ ┌─────────────────────┐   │
│ │  대기 12%         │ │ │ 1. 김의뢰인 (10건)  │   │
│ │  진행 8%          │ │ │ 2. 박작업자 (8건)   │   │
│ │  해결 80%         │ │ │ 3. 이의뢰인 (5건)   │   │
│ └───────────────────┘ │ └─────────────────────┘   │
│                                                    │
└────────────────────────────────────────────────────┘

컴포넌트:
1. StatCard - 숫자 통계
2. ProgressRing - 해결률 원형 차트
3. LineChart - 추이 차트 (recharts)
4. PieChart - 상태별 분포
5. RankingList - 작성자 랭킹

요구사항:
1. recharts 라이브러리 사용
2. 기간 필터 (7일, 30일, 전체)
3. 로딩 스켈레톤
4. 데이터 없을 때 빈 상태 UI
5. 프로젝트 상세 페이지 탭으로 추가
```

---

## 작업 6: UX 개선 작업

### 요청 내용

```
전반적인 UX 개선 작업을 진행해주세요.

1. 로딩 상태 개선
   - 버튼 클릭 시 인라인 스피너
   - API 호출 중 중복 클릭 방지
   - 낙관적 업데이트 확대 적용

2. 토스트 알림 개선
   - 액션 버튼 추가 (실행 취소 등)
   - 지속 시간 타입별 차등 (에러: 5초, 성공: 3초)
   - 스택 표시 (최대 3개)

3. 모바일 터치 개선
   - 스와이프 제스처 (리스트 삭제)
   - 풀 투 리프레시
   - 버튼 터치 영역 확대 (44px 최소)

4. 에러 메시지 개선
   - 사용자 친화적 메시지
   - 재시도 버튼 제공
   - 에러 상세 정보 (개발 모드)

5. 빈 상태 UI 통일
   - 일관된 스타일
   - CTA 버튼 제공
   - 도움말 링크

요구사항:
1. 기존 컴포넌트 수정
2. 일관된 패턴 적용
3. 접근성 개선 (aria-label 등)
```

---

## 참조 파일

- `rules/CODING_STANDARDS.md` - 코딩 컨벤션
- `rules/DESIGN_SYSTEM.md` - 디자인 시스템
- `rules/ERROR_PREVENTION.md` - 오류 방지 가이드
- `10_NAVIG_PRD_PHASE2-3_UNIFIED.md` - 통합 PRD

---

## 완료 기준

### 기능 체크리스트

**피드백 템플릿**
- [ ] 템플릿 CRUD API
- [ ] 템플릿 선택 드롭다운
- [ ] 템플릿 관리 모달
- [ ] 드래그 앤 드롭 순서 변경

**빠른 승인**
- [ ] 승인 API
- [ ] 승인 버튼 UI
- [ ] 승인 확인 다이얼로그
- [ ] 알림 발송

**키보드 단축키**
- [ ] useGlobalHotkeys 훅
- [ ] 단축키 목록 모달
- [ ] 글로벌 검색 모달 (Cmd+K)
- [ ] 피드백 네비게이션 (J/K)

**QR 코드 공유**
- [ ] QR 코드 생성
- [ ] 다운로드 기능
- [ ] 공유 드롭다운 메뉴

**피드백 통계**
- [ ] 통계 API
- [ ] 통계 대시보드 UI
- [ ] 차트 컴포넌트
- [ ] 기간 필터

### 품질 체크리스트

- [ ] TypeScript 에러 없음
- [ ] 반응형 디자인 완료
- [ ] 로딩/에러 상태 처리
- [ ] 모바일 테스트 완료
